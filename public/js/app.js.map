{"version":3,"sources":["translation.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$.extend($.validator.messages, {\n  required: \"Dieses Feld ist ein Pflichtfeld.\",\n  maxlength: $.validator.format(\"Geben Sie bitte maximal {0} Zeichen ein.\"),\n  minlength: $.validator.format(\"Geben Sie bitte mindestens {0} Zeichen ein.\"),\n  rangelength: $.validator.format(\"Geben Sie bitte mindestens {0} und maximal {1} Zeichen ein.\"),\n  email: \"Geben Sie bitte eine gültige E-Mail Adresse ein.\",\n  url: \"Geben Sie bitte eine gültige URL ein.\",\n  date: \"Bitte geben Sie ein gültiges Datum ein.\",\n  number: \"Geben Sie bitte eine Nummer ein.\",\n  digits: \"Geben Sie bitte nur Ziffern ein.\",\n  equalTo: \"Bitte denselben Wert wiederholen.\",\n  range: $.validator.format(\"Geben Sie bitte einen Wert zwischen {0} und {1} ein.\"),\n  max: $.validator.format(\"Geben Sie bitte einen Wert kleiner oder gleich {0} ein.\"),\n  min: $.validator.format(\"Geben Sie bitte einen Wert größer oder gleich {0} ein.\"),\n  creditcard: \"Geben Sie bitte eine gültige Kreditkarten-Nummer ein.\"\n});","$(function() {\n\t//define variables\n\t$.datas = {\n\t\tmap : null,\n\t\ticons:{\n\t\t\tbase: L.divIcon({\n\t\t\t\tclassName: 'baseIcon'\n\t\t\t}),\n\t\t\tevent:L.icon({\n\t\t\t    iconUrl: '/images/markers/bubble.png',\n\t\t\t    iconSize: [40, 33],\n\t\t\t    iconAnchor: [20, 33],\n\t\t\t    popupAnchor: [0, -20],\n\t\t\t    shadowUrl: '/images/markers/bubble_shadow.png',\n\t\t\t    //shadowRetinaUrl: 'my-icon-shadow@2x.png',\n\t\t\t    shadowSize: [40, 33],\n\t\t\t  \tshadowAnchor: [20, 33]\n\t\t\t}),\n\t\t\thuman:L.icon({\n\t\t\t    iconUrl: '/images/markers/ball.png',\n\t\t\t    iconSize: [12, 12],\n\t\t\t    iconAnchor: [6, 6],\n\t\t\t    //popupAnchor: [0, -20],\n\t\t\t    //shadowUrl: 'my-icon-shadow.png',\n\t\t\t    //shadowRetinaUrl: 'my-icon-shadow@2x.png',\n\t\t\t    //shadowSize: [68, 95],\n\t\t\t    //shadowAnchor: [22, 94]\n\t\t\t})\n\t\t},\n\t\tnewPoint : {\n\t\t\taddress: null,\n\t    marker: null\n\t\t},\n\t\tnewImage : null\n\t}\n\tvar newHuman = {\n\t\tname: '',\n\t\temail: '',\n\t\taddress: null\n\t};\n\tvar newEvent = {\n\t\tname: '',\n\t\temail: '',\n\t\taddress: null\n\t};\n\n\n  //Sidenav\n  $(\".button-collapse\").sideNav();\n\n  //Text Rotator\n  $(\".rotateText\").textrotator({\n    animation: \"flipCube\", // You can pick the way it animates when rotating through words. Options are dissolve (default), fade, flip, flipUp, flipCube, flipCubeUp and spin.\n    separator: \",\", // If you don't want commas to be the separator, you can define a new separator (|, &, * etc.) by yourself using this field.\n    speed: 2000 // How many milliseconds until the next word show.\n  });\n\n  //Modal opener\n  $('.modal-trigger').leanModal();\n\n  //Init Tabs\n  $('ul.tabs').tabs();\n\n  //RemoveLoader\n  $('body').removeClass('overflow-none');\n  $('#loader').fadeOut();\n\n  //Init DataTables\n  $('.dataTable').DataTable();\n\n  //Form Validator\n  $('.validate-me').validate({\n    errorElement: 'div',\n    errorPlacement: function(error, element) {\n      error.appendTo(element.parent(\".input-field\"));\n    }\n  });\n\n\t//switch forms\n\t$('#showEventsForm').on('click', function(){\n\t\tif( $('#eventForm').hasClass('hidden')){\n\t\t\t$('#eventForm').animateCss('fadeInDown','', '#event');\n\t\t\t$('#solidarischForm').animateCss('zoomOutLeft', 'hidden');\n\t\t}\n\t\telse{\n\t\t\t$('#solidarischForm').animateCss('fadeInDown');\n\t\t\t\t$('#eventForm').animateCss('zoomOutLeft', 'hidden');\n\t\t\t}\n\t});\n\n\t//validate and submit solidarisch form\n\t$('#solidarisch').validate({\n\t\terrorElement:'div',\n\t\terrorPlacement: function(error, element) {\n\t\t error.appendTo( element.parent(\".input-field\"));\n\t },\n\t\tsubmitHandler: function (form) {\n\t\t\tnewHuman.firstname = $('#firstname').val();\n\t\t\tnewHuman.lastname = $('#lastname').val();\n\t\t\tnewHuman.email = $('#email').val();\n\t\t\tnewHuman.lat = $.datas.newPoint.address.geometry.coordinates[0];\n\t\t\tnewHuman.lng = $.datas.newPoint.address.geometry.coordinates[1];\n\t\t\t$('#solidarisch .btn').attr('disabled', true);\n\t\t\t$.post('/api/pois/humans', newHuman, function (response) {\n\t\t\t\tswal({\n\t\t\t\t\ttitle: \"Baam!\",\n\t\t\t\t\ttext: \"Dein Pin wurde auf die Karte gesetzt!\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tconfirmButtonText: \"Ok!\",\n\t\t\t\t\tconfirmButtonColor: \"#EB5B27\"\n\t\t\t\t});\n\t\t\t\t//resetMarker();\n\t\t\t\t//source.setData(url);\n\t\t\t\tdrawMarker('human', [newHuman.lat, newHuman.lng]);\n\t\t\t\t$('#solidarisch')[0].reset();\n\t\t\t\t$('#solidarisch label').removeClass('active');\n\t\t\t\t$('#solidarisch .btn').removeAttr('disabled');\n\t\t\t}).error(function(response){\n\t\t\t\tswal({\n\t\t\t\t\ttitle: \"Ouch!\",\n\t\t\t\t\ttext: \"Da ist etwas schiefgelaufen!\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tconfirmButtonText: \"Ok!\",\n\t\t\t\t\tconfirmButtonColor: \"#EB5B27\"\n\t\t\t\t});\n\t\t\t\t$('#solidarisch .btn').removeAttr('disabled');\n\t\t\t});\n\t\t}\n\t});\n\n\t//validate and submit solidarisch form\n\t$('#event').validate({\n\t\terrorElement:'div',\n\t\terrorPlacement: function(error, element) {\n\t\t error.appendTo( element.parent(\".input-field\"));\n\t },\n\t\tsubmitHandler: function (form) {\n\n\t\t\tnewEvent.title =$('#event_title').val();\n\t\t\tnewEvent.address = newHuman.address;\n\t\t\tnewEvent.from_date = $('#event_from').val();\n\t\t\tnewEvent.phone = $('#event_phone').val();\n\t\t\tnewEvent.url = $('#event_url').val();\n\t\t\tnewEvent.description = $('#event_description').val();\n\t\t\tnewEvent.lat = newHuman.address.geometry.coordinates[0];\n\t\t\tnewEvent.lng = newHuman.address.geometry.coordinates[1];\n\t\t\tnewEvent.image_id = newImage.id;\n\t\t\t$('#event .btn').attr('disabled', true);\n\t\t\t$.post('/api/pois/events', newEvent, function (response) {\n\t\t\t\tswal({\n\t\t\t\t\ttitle: \"Baam!\",\n\t\t\t\t\ttext: \"Deine Veranstaltung wurde erfolgreich gespeichert!\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tconfirmButtonText: \"Ok!\",\n\t\t\t\t\tconfirmButtonColor: \"#EB5B27\"\n\t\t\t\t});\n\t\t\t\t//resetMarker();\n\t\t\t//\tsource.setData(url);\n\t\t\t\t$('#event')[0].reset();\n\t\t\t\t$('#event label').removeClass('active');\n\t\t\t}).error(function(response){\n\t\t\t\tswal({\n\t\t\t\t\ttitle: \"Ouch!\",\n\t\t\t\t\ttext: \"Da ist etwas schiefgelaufen!\",\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tconfirmButtonText: \"Ok!\",\n\t\t\t\t\tconfirmButtonColor: \"#EB5B27\"\n\t\t\t\t});\n\t\t\t\t$('#event .btn').removeAttr('disabled');\n\t\t\t});\n\t\t}\n\t});\n\n\n\t//autocomplete address input with mapzen remote\n\t$('.location').autocomplete({\n\t\tserviceUrl: 'https://search.mapzen.com/v1/search',\n\t\tdataType: 'json',\n\t\tparamName: 'text',\n\t\tparams: {\n\t\t\t\"api_key\": \"search-Jssufg0\"\n\t\t},\n\t\tminChars: 3,\n\t\ttransformResult: function (response) {\n\t\t\treturn {\n\t\t\t\tsuggestions: $.map(response.features, function (item) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tvalue: item.properties.label,\n\t\t\t\t\t\tdata: item\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonSelect: function (suggestion) {\n    \t$.datas.newPoint.address = suggestion.data;\n\t\t\tvar coordinates = suggestion.data.geometry.coordinates;\n\t\t\t//TODO: When rest of form is valid\n\t\t\t$('#solidarisch .btn').removeAttr('disabled');\n\n\t\t\tdrawMarker('base', coordinates);\n\n\t\t}\n\t});\n\n\n\t//define image uploader\n\t$(\"#image-upload\").dropzone({\n\t\tinit:function(){\n\t\t\t this.on(\"success\", function(file) {\n\t\t\t\t\t$.datas.newImage = JSON.parse(file.xhr.response);\n\t\t\t });\n\t\t},\n\t\tparamName:'image',\n\t\tmaxFilesize: 4,\n\t\tmultiple:false,\n\t\tmaxFiles:1,\n\t\taddRemoveLinks:true,\n\t\tacceptedFiles:'image/*',\n\t\turl: \"/api/images\",\n\t\tthumbnailWidth:336,\n\t\tthumbnailHeight:150,\n\t\tdictRemoveFile:'Bild löschen',\n\t\tdictInvalidFileType:'Bilddatei?',\n\t\tdictFileTooBig:'Die Datei ist zu groß!',\n\t\t// success:function(file){\n\t\t// \tconsole.log(JSON.parse(file.xhr.response));\n\t\t// }\n\t});\n\n\tfunction drawMarker(type, coordinates){\n\t\tif($.datas.newPoint.marker){\n\t\t\t$.datas.newPoint.marker.remove();\n\t\t};\n\n\n\t\t$.datas.newPoint.marker = L.marker([coordinates[1], coordinates[0]],{\n\t\t\ticon: $.datas.icons[type],\n\t\t\tdraggable:true,\n\t\t\triseOnHover:true,\n\t\t});\n\t\t$.datas.newPoint.marker.addTo($.datas.map);\n\t\t$.datas.newPoint.marker.on('dragend', function(e){\n\t\t\tconsole.log(e.target._latlng);\n\t\t});\n\t\t$.datas.map.flyTo([coordinates[1], coordinates[0]], 13);\n\t}\n});\n\n$.fn.extend({\n  animateCss: function(animationName, doneClass, element) {\n    var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';\n    $(this).removeClass('hidden');\n    $(this).addClass('animated ' + animationName).one(animationEnd, function() {\n      $(this).removeClass('animated ' + animationName);\n      $(this).addClass(doneClass);\n      /*$('html, body').animate({\n\t\t\t\t\t\t scrollTop: $(element).offset().top\n\t\t\t\t\t }, 1000);*/\n    });\n  }\n});\n"],"sourceRoot":"/source/"}