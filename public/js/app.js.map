{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$(function () {\n\t//   //defining Varibles\n\t//   var mapBoxApi = '';\n\t//\n\t//\n\t//   //Create Human Icon\n\t//   var humanIcon = L.icon({\n\t//     iconUrl: 'icon-human.png',\n\t//     shadowUrl: 'icon-human-shadow.png',\n\t//     iconSize:     [38, 95], // size of the icon\n\t//     shadowSize:   [50, 64], // size of the shadow\n\t//     iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location\n\t//     shadowAnchor: [4, 62],  // the same for the shadow\n\t//     popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor\n\t//   });\n\t//\n\t//   //Init LeafletMap\n\t//   var map = L.map('wo_map');\n\t//\n\t//   //Set TileLayer\n\t//   L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={mapBoxApi}', {\n\t//     attribution: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery Â© <a href=\"http://mapbox.com\">Mapbox</a>',\n\t//     maxZoom: 18,\n\t//     id: 'your.mapbox.project.id',\n\t//     accessToken: 'pk.eyJ1IjoibWFnbm9sbyIsImEiOiJuSFdUYkg4In0.5HOykKk0pNP1N3isfPQGTQ'\n\t// }).addTo(mymap);\n\t//\n\t//   //Add Markers to LeafletMap\n\n\n  //define mapbox api\n  mapboxgl.accessToken = 'pk.eyJ1IjoibWFnbm9sbyIsImEiOiJuSFdUYkg4In0.5HOykKk0pNP1N3isfPQGTQ';\n  var newHuman = {\n    name:'',\n    email:'',\n    address:null\n  };\n\n  //setup popup\n  var popup = new mapboxgl.Popup({\n    closeButton:false\n  });\n\n  //setup mapbox gl map\n\tvar map = new mapboxgl.Map({\n\t\tcontainer: 'wo_map',\n\t\tstyle: 'mapbox://styles/mapbox/light-v8',\n\t\tcenter: [16.372801, 48.209272],\n\t\tzoom: 3,\n\t});\n\n  //setup marker data for humans from lokal api\n\tmap.on('style.load', function () {\n\t\tmap.addSource('peoples', {\n\t\t\ttype: 'geojson',\n\t\t\tdata: '/api/pois/humans'\n\t\t});\n\t\tmap.addLayer({\n\t\t\t\"id\": \"humans\",\n      \"interactive\" : true,\n\t\t\t\"type\": \"circle\",\n      \"paint\":{\n        \"circle-color\":'#EB5B27',\n        \"circle-radius\":3\n      },\n\t\t\t\"source\": \"peoples\",\n\t\t})\n\t});\n\n  //open popup for click on human marker\n  map.on('click', function(e){\n    map.featuresAt(e.point, {\n      radius: 7.5,\n      includeGeometry: true,\n      layer:'humans'\n    }, function(err, features){\n      if(err || !features.length){\n        popup.remove();\n        return;\n      }\n      var feature = features[0];\n      popup.setLngLat(feature.geometry.coordinates)\n        .setHTML(feature.properties.name)\n        .addTo(map);\n    })\n  });\n\n  //submit solidarisch form\n  $('#solidarisch').submit(function(e){\n    e.preventDefault();\n    newHuman.name = $('#name').val();\n    newHuman.email = $('#email').val();\n    console.log(newHuman);\n    newHuman.lat = newHuman.address.geometry.coordinates[0];\n    newHuman.lng = newHuman.address.geometry.coordinates[1];\n    $.post('/api/pois/humans', newHuman, function(response){\n      console.log(response);\n    })\n  })\n\n  //autocomplete address input with mapzen remote\n  $('#address').autocomplete({\n    serviceUrl: 'https://search.mapzen.com/v1/search',\n    dataType:'json',\n    paramName: 'text',\n    params:{\n      \"api_key\": \"search-Jssufg0\"\n    },\n    minChars:3,\n    transformResult:function(response){\n      return {\n        suggestions: $.map(response.features, function(item){\n          return { value: item.properties.label, data: item}\n        })\n      }\n    },\n    onSelect:function(suggestion){\n      newHuman.address = suggestion.data;\n      addMarker(suggestion.data);\n      fly(suggestion.data.geometry.coordinates)\n    }\n  });\n\n  //Map Fly to lat,lng\n  function addMarker(data){\n    map.addSource('newMarker', {\n\t\t\ttype: 'geojson',\n\t\t\tdata: data\n\t\t});\n    map.addLayer({\n      \"id\": \"newEntry\",\n      \"interactive\" : true,\n      \"type\": \"circle\",\n      \"paint\":{\n        \"circle-color\":'#00ff00',\n        \"circle-radius\":5\n      },\n      \"source\": \"newMarker\",\n    })\n  }\n  function fly(coordinates) {\n    map.flyTo({\n        center: coordinates, zoom:10\n    });\n  }\n\n});\n"],"sourceRoot":"/source/"}